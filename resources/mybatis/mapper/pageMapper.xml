<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
 "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
 
<mapper namespace="com.house.team.user.dao.PageMapper">
	
	<select id="selectSigunguList" resultType="String">
		SELECT DISTINCT REGEXP_SUBSTR(lgl_addr, '[^ ]+', 1, 2) AS sigungu
		FROM APT_INFO
		ORDER BY sigungu
	</select>
	
	<select id="selectDongList" parameterType="String" resultType="String">
	    SELECT DISTINCT REGEXP_SUBSTR(lgl_addr, '[^ ]+', 1, 3) AS dong
	    FROM APT_INFO
	    WHERE REGEXP_SUBSTR(lgl_addr, '[^ ]+', 1, 2) = #{sigungu}
	    ORDER BY dong
	</select>
	
	<select id="selectAptList" parameterType="map" resultType="com.house.team.stats.vo.APTInfoVO">
	    SELECT CMPX_CD AS cmpxCd,
	           CMPX_NM AS cmpxNm
	    FROM APT_INFO
	    WHERE REGEXP_SUBSTR(LGL_ADDR, '[^ ]+', 1, 2) = #{sigungu}
	      AND REGEXP_SUBSTR(LGL_ADDR, '[^ ]+', 1, 3) = #{dong}
	    ORDER BY CMPX_NM
	</select>
</mapper>